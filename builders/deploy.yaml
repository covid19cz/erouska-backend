steps:
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
  - functions
  - deploy
  - RegisterEhrid
  - --source=.
  - --trigger-http
  - --region=europe-west1
  - --runtime=go113
  - --memory=128
  - --allow-unauthenticated
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
  - functions
  - deploy
  - IsEhridActive
  - --source=.
  - --trigger-http
  - --region=europe-west1
  - --runtime=go113
  - --memory=128
  - --allow-unauthenticated
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - IncreaseEhridAttemptsCount
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - CheckAttemptsThresholds
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - IncreaseNotificationsCounter
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - RegisterNotification
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
    - --allow-unauthenticated
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - ProvideVerificationCode
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
    - --allow-unauthenticated
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - DownloadCovidDataTotal
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - CalculateCovidDataIncrease
    - --source=.
    - --trigger-event=providers/cloud.firestore/eventTypes/document.write
    - --trigger-resource=projects/${PROJECT_ID}/databases/(default)/documents/covidDataTotal/{date}
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
- name: 'gcr.io/cloud-builders/gcloud'
  waitFor: ['-']
  args:
    - functions
    - deploy
    - GetCovidData
    - --source=.
    - --trigger-http
    - --region=europe-west1
    - --runtime=go113
    - --memory=128
    - --allow-unauthenticated
